// Prisma schema for Rise for Impact

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Program {
  id                Int      @id @default(autoincrement())
  title             String
  shortDesc         String?  @map("short_desc")
  longDesc          String?  @map("long_desc")
  description       String?
  location          String?
  status            String?  @default("active")
  applicationsOpen  Boolean  @default(false) @map("applications_open")
  applicationUrl    String?  @map("application_url")
  startDate         String?  @map("start_date")
  endDate           String?  @map("end_date")
  participants      Int?
  focus             String?
  duration          String?
  image             String?
  createdAt         DateTime @default(now()) @map("created_at")

  @@map("programs")
}

model TeamMember {
  id        Int      @id @default(autoincrement())
  name      String
  role      String
  category  String   @default("coordinators")
  country   String?
  countryFlag String? @map("country_flag")
  focus     String?
  image     String?
  linkedin  String?
  twitter   String?
  email     String?
  bio       String?
  createdAt DateTime @default(now()) @map("created_at")

  @@map("team_members")
}

model BlogPost {
  id           Int      @id @default(autoincrement())
  title        String
  excerpt      String?
  content      String?
  category     String?
  url          String?
  image        String?
  author       String?
  date         String?
  mediaGallery String?  @map("media_gallery")
  createdAt    DateTime @default(now()) @map("created_at")

  @@map("blog_posts")
}

model MediaAsset {
  id        Int      @id @default(autoincrement())
  title     String
  excerpt   String?
  mediaUrl  String?  @map("media_url")
  type      String?
  createdAt DateTime @default(now()) @map("created_at")

  @@map("media_assets")
}

model Application {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  country   String?
  message   String?
  type      String?
  status    String   @default("pending")
  createdAt DateTime @default(now()) @map("created_at")

  @@map("applications")
}

model Admin {
  id               Int       @id @default(autoincrement())
  email            String    @unique
  password         String
  name             String
  role             String    @default("admin")
  resetToken       String?   @map("reset_token")
  resetTokenExpiry DateTime? @map("reset_token_expiry")
  createdAt        DateTime  @default(now()) @map("created_at")

  @@map("admins")
}

model NewsletterSubscriber {
  id          Int      @id @default(autoincrement())
  email       String   @unique
  subscribedAt DateTime @default(now()) @map("subscribed_at")
  isActive    Boolean  @default(true) @map("is_active")

  @@map("newsletter_subscribers")
}

model VolunteerApplication {
  id             Int      @id @default(autoincrement())
  fullName       String   @map("full_name")
  email          String
  phone          String?
  country        String?
  city           String?
  role           String   // Role applying for (e.g., "Graphic Designer", "Content Writer")
  experience     String?  // Years of experience or level
  skills         String?  // Comma-separated list of skills
  availability   String?  // Hours per week or availability description
  portfolio      String?  // Portfolio URL or relevant links
  linkedin       String?  // LinkedIn profile
  whyVolunteer   String?  @map("why_volunteer") // Why they want to volunteer
  whatCanOffer   String?  @map("what_can_offer") // What value they can bring
  previousWork   String?  @map("previous_work") // Previous volunteer/work experience
  heardFrom      String?  @map("heard_from") // How they heard about us
  additionalInfo String?  @map("additional_info") // Any additional information
  status         String   @default("pending") // pending, approved, rejected, contacted
  createdAt      DateTime @default(now()) @map("created_at")

  @@map("volunteer_applications")
}

model Opportunity {
  id           Int      @id @default(autoincrement())
  title        String   // Opportunity title
  description  String   // Full description/about the opportunity
  organization String?  // Company/Organization offering
  deadline     String?  // Application deadline
  eligibility  String?  // Who can apply / requirements
  benefits     String?  // What participants get
  applyLink    String   @map("apply_link") // External application URL
  image        String?  // Flyer/poster image
  categories   String?  // JSON array of categories: ["Scholarship", "Internship"], etc.
  location     String?  // Location (if relevant)
  isPaid       Boolean  @default(false) @map("is_paid") // Whether it's a paid opportunity (ads)
  isActive     Boolean  @default(true) @map("is_active") // Active/inactive status
  isFeatured   Boolean  @default(false) @map("is_featured") // Featured on homepage
  views        Int      @default(0) // Track clicks/views
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("opportunities")
}
