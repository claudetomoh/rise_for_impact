module.exports=[52546,a=>{"use strict";var b=a.i(87924),c=a.i(75003),d=a.i(50944),e=a.i(72131),f=a.i(99570),g=a.i(66718),h=a.i(27144);function i({onUploadComplete:a,currentImage:c}){let[d,f]=(0,e.useState)(!1),[g,h]=(0,e.useState)(c||""),i=async b=>{let c=b.target.files?.[0];if(!c)return;let d=new FileReader;d.onloadend=()=>{h(d.result)},d.readAsDataURL(c),f(!0);try{let b=new FormData;b.append("file",c);let d=await fetch("/api/upload",{method:"POST",body:b});if(d.ok){let b=await d.json();a(b.url)}else alert("Failed to upload image")}catch(a){alert("Error uploading image")}finally{f(!1)}};return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("label",{className:"flex-1",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-emerald-500 transition-colors bg-gray-50",children:g?(0,b.jsx)("img",{src:g,alt:"Preview",className:"h-full object-contain"}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Click to upload image"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"PNG, JPG up to 10MB"})]})}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:i,disabled:d,className:"hidden"})]})}),d&&(0,b.jsxs)("div",{className:"text-sm text-emerald-600 flex items-center gap-2",children:[(0,b.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,b.jsx)("strong",{children:"Note:"})," You can also paste an image URL directly in the image URL field instead of uploading."]})]})}function j(){let{status:a}=(0,c.useSession)(),j=(0,d.useRouter)(),[k,l]=(0,e.useState)([]),[m,n]=(0,e.useState)(!0),[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)([]),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)("image"),[w,x]=(0,e.useState)(""),[y,z]=(0,e.useState)({title:"",excerpt:"",category:"",url:"",image:"",author:"",date:new Date().toISOString().split("T")[0],content:""});(0,e.useEffect)(()=>{"unauthenticated"===a&&j.push("/admin/login")},[a,j]),(0,e.useEffect)(()=>{"authenticated"===a&&A()},[a]);let A=()=>{fetch("/api/blogs").then(a=>a.json()).then(a=>{l(a),n(!1)}).catch(()=>n(!1))},B=async a=>{a.preventDefault();try{(await fetch("/api/blogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...y,mediaGallery:q.length>0?JSON.stringify(q):null})})).ok&&(z({title:"",excerpt:"",category:"",url:"",image:"",author:"",date:new Date().toISOString().split("T")[0],content:""}),r([]),p(!1),A())}catch(a){}};return"loading"===a||m?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-emerald-600 text-xl",children:"Loading..."})}):"unauthenticated"===a?null:(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-emerald-100 to-teal-50",children:[(0,b.jsx)(h.default,{}),(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-emerald-600 mb-2",children:"Content Management"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage blog posts and media assets"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>j.push("/admin/media-assets"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Media Library"]}),(0,b.jsx)("button",{onClick:()=>j.push("/admin/dashboard"),className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-semibold transition-colors",children:"Back to Dashboard"}),(0,b.jsx)("button",{onClick:()=>p(!o),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-semibold transition-colors",children:o?"Cancel":"+ New Blog Post"})]})]}),o&&(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Create New Blog Post"}),(0,b.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,b.jsx)(g.Input,{value:y.title,onChange:a=>z({...y,title:a.target.value}),placeholder:"Blog post title",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),(0,b.jsx)(g.Input,{value:y.category,onChange:a=>z({...y,category:a.target.value}),placeholder:"e.g., Climate Action, Youth Leadership",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Author *"}),(0,b.jsx)(g.Input,{value:y.author,onChange:a=>z({...y,author:a.target.value}),placeholder:"Author name",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,b.jsx)(g.Input,{type:"date",value:y.date,onChange:a=>z({...y,date:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"External URL"}),(0,b.jsx)(g.Input,{value:y.url,onChange:a=>z({...y,url:a.target.value}),placeholder:"https://medium.com/article-url"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blog Image"}),(0,b.jsx)(i,{currentImage:y.image,onUploadComplete:a=>z({...y,image:a})}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Or enter image URL manually:"}),(0,b.jsx)(g.Input,{value:y.image,onChange:a=>z({...y,image:a.target.value}),placeholder:"/images/blog-image.jpg or https://..."})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Excerpt/Description *"}),(0,b.jsx)("textarea",{value:y.excerpt,onChange:a=>z({...y,excerpt:a.target.value}),placeholder:"Brief description of the blog post...",required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 text-gray-900 bg-white"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Content (Markdown Supported)"}),(0,b.jsx)("textarea",{value:y.content,onChange:a=>z({...y,content:a.target.value}),placeholder:"Write the full blog post content here... (Supports Markdown formatting)  # Heading 1 ## Heading 2 ### Heading 3  **Bold text** *Italic text*  - Bullet point 1 - Bullet point 2  1. Numbered list 2. Item 2  > Blockquote  ![Image description](/images/backgrounds/image.jpg)",rows:12,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 font-mono text-sm text-gray-900 bg-white"}),(0,b.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-blue-800 mb-2",children:"âœ¨ Markdown Formatting Tips:"}),(0,b.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,b.jsxs)("li",{children:["â€¢ Use ",(0,b.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"# Heading"})," for large headings"]}),(0,b.jsxs)("li",{children:["â€¢ Use ",(0,b.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"## Subheading"})," for smaller headings"]}),(0,b.jsxs)("li",{children:["â€¢ Use ",(0,b.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"**bold**"})," for bold text"]}),(0,b.jsxs)("li",{children:["â€¢ Use ",(0,b.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"*italic*"})," for italic text"]}),(0,b.jsxs)("li",{children:["â€¢ Add images: ",(0,b.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"![Alt text](/images/backgrounds/photo.jpg)"})]}),(0,b.jsxs)("li",{children:["â€¢ Create blockquotes: ",(0,b.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"> Quote text"})]}),(0,b.jsx)("li",{children:"â€¢ Use double line breaks for new paragraphs"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Media Gallery (Images & Videos)"}),q.length>0&&(0,b.jsx)("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(a=>(0,b.jsxs)("div",{className:"relative group border border-gray-200 rounded-lg overflow-hidden bg-gray-50",children:["image"===a.type?(0,b.jsx)("div",{className:"aspect-video relative",children:(0,b.jsx)("img",{src:a.url,alt:a.caption||"Gallery image",className:"w-full h-full object-cover"})}):(0,b.jsx)("div",{className:"aspect-video relative bg-black",children:(0,b.jsx)("iframe",{src:(a=>{if(a.includes("youtube.com/watch")){let b=a.split("v=")[1]?.split("&")[0];return`https://www.youtube.com/embed/${b}`}if(a.includes("youtu.be/")){let b=a.split("youtu.be/")[1]?.split("?")[0];return`https://www.youtube.com/embed/${b}`}if(a.includes("vimeo.com/")){let b=a.split("vimeo.com/")[1]?.split("?")[0];return`https://player.vimeo.com/video/${b}`}return a})(a.url),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),a.caption&&(0,b.jsx)("p",{className:"px-2 py-1 text-xs text-gray-600 bg-white border-t border-gray-200",children:a.caption}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void r(q.filter(a=>a.id!==b))},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-red-600",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,b.jsx)("div",{className:"absolute bottom-2 left-2 px-2 py-1 bg-black/60 text-white text-xs rounded-md font-medium",children:"image"===a.type?"ðŸ“· Image":"ðŸŽ¥ Video"})]},a.id))}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>v("image"),className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${"image"===u?"bg-emerald-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"ðŸ“· Add Image"}),(0,b.jsx)("button",{type:"button",onClick:()=>v("video"),className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${"video"===u?"bg-emerald-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"ðŸŽ¥ Add Video"})]}),(0,b.jsx)(g.Input,{value:s,onChange:a=>t(a.target.value),placeholder:"image"===u?"Enter image URL (e.g., /images/photo.jpg or https://...)":"Enter YouTube or Vimeo URL (e.g., https://youtube.com/watch?v=...)",className:"w-full"}),(0,b.jsx)(g.Input,{value:w,onChange:a=>x(a.target.value),placeholder:"Caption (optional)",className:"w-full"}),(0,b.jsx)("button",{type:"button",onClick:()=>{s.trim()&&(r([...q,{id:Date.now().toString(),type:u,url:s,caption:w||void 0}]),t(""),x(""))},disabled:!s.trim(),className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-md font-medium transition-colors",children:"+ Add to Gallery"})]}),(0,b.jsxs)("div",{className:"mt-3 text-xs text-gray-500 space-y-1",children:[(0,b.jsxs)("p",{children:["â€¢ ",(0,b.jsx)("strong",{children:"Images:"})," Upload to /public/images/ or use external URLs"]}),(0,b.jsxs)("p",{children:["â€¢ ",(0,b.jsx)("strong",{children:"Videos:"})," YouTube and Vimeo URLs will be automatically embedded"]}),(0,b.jsxs)("p",{children:["â€¢ ",(0,b.jsx)("strong",{children:"Gallery count:"})," ",q.length," item",1!==q.length?"s":""]})]})]})]}),(0,b.jsx)(f.Button,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-lg font-semibold transition-colors",children:"Create Blog Post"})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:0===k.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No blog posts yet. Create your first one!"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-emerald-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Title"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Category"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Author"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Media"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Date"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.map(a=>{let c=0,d=0,e=0;if(a.mediaGallery)try{let b=JSON.parse(a.mediaGallery);c=b.length,d=b.filter(a=>"image"===a.type).length,e=b.filter(a=>"video"===a.type).length}catch(a){}return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-6 py-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.title}),(0,b.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-md",children:a.excerpt}),a.content&&(0,b.jsx)("div",{className:"text-xs text-emerald-600 mt-1",children:"âœ“ Has full content"})]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:a.category})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.author}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:c>0?(0,b.jsxs)("div",{className:"flex gap-2 text-xs",children:[d>0&&(0,b.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded font-medium",children:["ðŸ“· ",d]}),e>0&&(0,b.jsxs)("span",{className:"px-2 py-1 bg-pink-100 text-pink-700 rounded font-medium",children:["ðŸŽ¥ ",e]})]}):(0,b.jsx)("span",{className:"text-gray-400 text-xs",children:"No media"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(a.date).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:a.url&&(0,b.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:text-emerald-700 font-medium",children:"View â†’"})})]},a.id)})})]})})})]})})]})}a.s(["default",()=>j],52546)}];

//# sourceMappingURL=src_app_admin_blogs_page_tsx_bcac321b._.js.map