module.exports=[43564,a=>{"use strict";var b=a.i(87924),c=a.i(75003),d=a.i(50944),e=a.i(72131),f=a.i(27144);function g(){let{data:a,status:g}=(0,c.useSession)(),h=(0,d.useRouter)(),[i,j]=(0,e.useState)([]),[k,l]=(0,e.useState)(!0),[m,n]=(0,e.useState)(""),[o,p]=(0,e.useState)("all"),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(""),[w,x]=(0,e.useState)([]),[y,z]=(0,e.useState)("active"),[A,B]=(0,e.useState)([]),[C,D]=(0,e.useState)(!1),[E,F]=(0,e.useState)(0);(0,e.useEffect)(()=>{"unauthenticated"===g&&h.push("/admin/login")},[g,h]),(0,e.useEffect)(()=>{"authenticated"===g&&G()},[g]);let G=async()=>{try{let a=await fetch("/api/newsletter"),b=await a.json();j(b)}catch(a){}finally{l(!1)}},H=async(a,b)=>{try{(await fetch(`/api/newsletter?id=${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!b})})).ok?G():alert("Failed to update subscriber status")}catch(a){alert("Error updating subscriber status")}},I=async a=>{if(confirm("Are you sure you want to delete this subscriber?"))try{(await fetch(`/api/newsletter?id=${a}`,{method:"DELETE"})).ok?(G(),alert("Subscriber deleted successfully!")):alert("Failed to delete subscriber")}catch(a){alert("Error deleting subscriber")}},J=async a=>{let b=Array.from(a.target.files||[]);if(0===b.length)return;let c=b.map(a=>({file:a,preview:URL.createObjectURL(a),id:Math.random().toString(36).substring(7)}));x(a=>[...a,...c])},K=async()=>{if(!s.trim()||!u.trim())return void alert("Please provide both subject and content");let a=[];if("all"===y?a=i:"active"===y?a=i.filter(a=>a.isActive):"inactive"===y?a=i.filter(a=>!a.isActive):"custom"===y&&(a=i.filter(a=>A.includes(a.email))),0===a.length)return void alert("No recipients selected. Please select at least one recipient.");if(confirm(`Send newsletter to ${a.length} subscriber(s)?`)){D(!0),F(0);try{let b=w.map(async a=>new Promise(b=>{let c=new FileReader;c.onloadend=()=>{b({id:a.id,data:c.result})},c.readAsDataURL(a.file)})),c=await Promise.all(b),d=u;w.forEach((a,b)=>{d=d.replace(a.preview,c[b].data)});let e=await fetch("/api/newsletter/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:s,content:d,recipients:a.map(a=>a.email)})});if(e.ok){let a=await e.json();alert(`Newsletter sent successfully to ${a.sent} subscribers!`),r(!1),t(""),v(""),x([])}else{let a=await e.json();alert(`Failed to send newsletter: ${a.error}`)}}catch(a){alert("Error sending newsletter")}finally{D(!1),F(0)}}},L=i.filter(a=>{let b=a.email.toLowerCase().includes(m.toLowerCase()),c="all"===o||"active"===o&&a.isActive||"inactive"===o&&!a.isActive;return b&&c}),M={total:i.length,active:i.filter(a=>a.isActive).length,inactive:i.filter(a=>!a.isActive).length};return"loading"===g||k?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-emerald-600 text-xl",children:"Loading..."})}):"unauthenticated"===g?null:(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(f.default,{}),(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Newsletter Subscribers"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage email subscriptions and send newsletters"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>r(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Compose Newsletter"]}),(0,b.jsxs)("button",{onClick:()=>{let a=new Blob([["Email,Subscribed At,Status",...L.map(a=>[a.email,new Date(a.subscribedAt).toLocaleString(),a.isActive?"Active":"Inactive"]).map(a=>a.map(a=>`"${a}"`).join(","))].join("\n")],{type:"text/csv"}),b=window.URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download=`newsletter-subscribers-${new Date().toISOString().split("T")[0]}.csv`,c.click(),window.URL.revokeObjectURL(b)},className:"px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Total Subscribers"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:M.total})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Active"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:M.active})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Inactive"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:M.inactive})]})]})})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,b.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),placeholder:"Search by email...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-gray-900 bg-white"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,b.jsxs)("select",{value:o,onChange:a=>p(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-gray-900 bg-white",children:[(0,b.jsx)("option",{value:"all",children:"All Statuses"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]})}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Email"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Subscribed At"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===L.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:4,className:"px-6 py-12 text-center",children:[(0,b.jsx)("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,b.jsx)("p",{className:"text-gray-500",children:"No subscribers found"})]})}):L.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.email})]})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:[new Date(a.subscribedAt).toLocaleDateString()," at"," ",new Date(a.subscribedAt).toLocaleTimeString()]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("button",{onClick:()=>H(a.id,a.isActive),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${a.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:a.isActive?"Active":"Inactive"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsx)("button",{onClick:()=>I(a.id),className:"text-red-600 hover:text-red-700 font-medium text-sm transition-colors",children:"Delete"})})]},a.id))})]})})}),(0,b.jsxs)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",L.length," of ",i.length," subscribers"]})]})}),q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Compose Newsletter"}),(0,b.jsx)("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Send to ",M.active," active subscribers"]})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-6 border-2 border-emerald-200",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-4",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Select Recipients *"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,b.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-white border-2 border-emerald-200 rounded-lg cursor-pointer hover:border-emerald-400 transition-all duration-200 has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-50",children:[(0,b.jsx)("input",{type:"radio",name:"recipientFilter",value:"active",checked:"active"===y,onChange:a=>z(a.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:"Active Subscribers"}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[M.active," subscribers"]})]})]}),(0,b.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-white border-2 border-emerald-200 rounded-lg cursor-pointer hover:border-emerald-400 transition-all duration-200 has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-50",children:[(0,b.jsx)("input",{type:"radio",name:"recipientFilter",value:"all",checked:"all"===y,onChange:a=>z(a.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:"All Subscribers"}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[M.total," subscribers"]})]})]}),(0,b.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-white border-2 border-emerald-200 rounded-lg cursor-pointer hover:border-emerald-400 transition-all duration-200 has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-50",children:[(0,b.jsx)("input",{type:"radio",name:"recipientFilter",value:"inactive",checked:"inactive"===y,onChange:a=>z(a.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:"Inactive Subscribers"}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[M.inactive," subscribers"]})]})]}),(0,b.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-white border-2 border-emerald-200 rounded-lg cursor-pointer hover:border-emerald-400 transition-all duration-200 has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-50",children:[(0,b.jsx)("input",{type:"radio",name:"recipientFilter",value:"custom",checked:"custom"===y,onChange:a=>z(a.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:"Custom Selection"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Choose specific emails"})]})]})]}),"custom"===y&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-white border-2 border-emerald-300 rounded-lg max-h-64 overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-700",children:["Select Subscribers (",A.length," selected)"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>B(i.map(a=>a.email)),className:"text-xs px-3 py-1 bg-emerald-100 text-emerald-700 rounded-md hover:bg-emerald-200 font-semibold",children:"Select All"}),(0,b.jsx)("button",{onClick:()=>B([]),className:"text-xs px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 font-semibold",children:"Clear"})]})]}),(0,b.jsx)("div",{className:"space-y-2",children:i.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-3 p-2 hover:bg-emerald-50 rounded-lg cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:A.includes(a.email),onChange:b=>{b.target.checked?B(b=>[...b,a.email]):B(b=>b.filter(b=>b!==a.email))},className:"w-4 h-4 text-emerald-600 rounded focus:ring-emerald-500"}),(0,b.jsx)("span",{className:"text-sm text-gray-700 flex-1",children:a.email}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${a.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:a.isActive?"Active":"Inactive"})]},a.id))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-emerald-100 border border-emerald-300 rounded-lg",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-emerald-800",children:["Newsletter will be sent to ","all"===y?M.total:"active"===y?M.active:"inactive"===y?M.inactive:A.length," recipient(s)"]})]})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),"Subject Line *"]}),(0,b.jsx)("input",{type:"text",value:s,onChange:a=>t(a.target.value),placeholder:"Enter your newsletter subject...",className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 text-gray-900 bg-white transition-all duration-200 text-lg font-medium placeholder:text-gray-400"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-dashed border-blue-200",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Media & Attachments"]}),(0,b.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:J,className:"hidden",id:"image-upload"}),(0,b.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center justify-center py-8 px-4 border-2 border-blue-300 border-dashed rounded-lg hover:bg-blue-50 transition-all duration-200 bg-white",children:[(0,b.jsx)("svg",{className:"w-12 h-12 text-blue-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,b.jsx)("p",{className:"text-blue-600 font-semibold mb-1",children:"Click to upload images or flyers"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]}),w.length>0&&(0,b.jsx)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:w.map(a=>(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("img",{src:a.preview,alt:"Uploaded",className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 shadow-sm"}),(0,b.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-200 rounded-lg flex items-center justify-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{var b;let c;return b=a.preview,c=`<img src="${b}" alt="Newsletter image" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;" />`,void v(a=>a+"\n"+c)},className:"opacity-0 group-hover:opacity-100 px-3 py-2 bg-blue-600 text-white text-xs font-semibold rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-lg",children:"Insert"}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void x(a=>{let c=a.find(a=>a.id===b);return c&&URL.revokeObjectURL(c.preview),a.filter(a=>a.id!==b)})},className:"opacity-0 group-hover:opacity-100 px-3 py-2 bg-red-600 text-white text-xs font-semibold rounded-lg hover:bg-red-700 transition-all duration-200 shadow-lg",children:"Remove"})]})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Newsletter Content *"]}),(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("textarea",{value:u,onChange:a=>v(a.target.value),placeholder:"Write your newsletter content here... Use HTML tags for rich formatting!  Examples: <h1>Heading</h1> <p>Paragraph text</p> <strong>Bold text</strong> <a href='url'>Link</a>",rows:15,className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 text-gray-900 bg-white font-mono text-sm transition-all duration-200 placeholder:text-gray-400"})}),(0,b.jsxs)("div",{className:"flex items-start gap-2 mt-3 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,b.jsx)("p",{className:"font-semibold mb-1",children:"Pro Tips:"}),(0,b.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,b.jsx)("li",{children:'Use HTML tags: <h1>, <p>, <strong>, <a href="...">'}),(0,b.jsx)("li",{children:'Upload images above, then click "Insert" to add them to your content'}),(0,b.jsx)("li",{children:"Images will be automatically embedded in the email"})]})]})]})]}),(u||w.length>0)&&(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 border-2 border-gray-200",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-4",children:[(0,b.jsxs)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Live Preview"]}),(0,b.jsx)("div",{className:"bg-white rounded-lg p-8 shadow-inner max-h-96 overflow-y-auto border border-gray-300",children:(0,b.jsx)("div",{className:"prose prose-sm max-w-none prose-headings:text-gray-900 prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900 prose-img:rounded-lg prose-img:shadow-md",dangerouslySetInnerHTML:{__html:u}})})]}),C&&(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Sending newsletter..."})]})})]}),(0,b.jsxs)("div",{className:"p-6 border-t border-gray-200 flex gap-3 justify-end",children:[(0,b.jsx)("button",{onClick:()=>r(!1),disabled:C,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,b.jsxs)("button",{onClick:K,disabled:C||!s.trim()||!u.trim(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),C?"Sending...":`Send to ${M.active} Subscribers`]})]})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_admin_newsletter_page_tsx_0a3ac2c3._.js.map