{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tomoh.ikfingeh/Downloads/rise4impact_starter/nextjs-app/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: PrismaClient | undefined\r\n}\r\n\r\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient()\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,sMAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tomoh.ikfingeh/Downloads/rise4impact_starter/nextjs-app/src/app/api/newsletter/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\r\nimport { Resend } from 'resend'\r\nimport { z } from 'zod'\r\nimport { prisma } from '@/lib/prisma'\r\n\r\nexport const dynamic = 'force-dynamic'\r\n\r\nconst newsletterSchema = z.object({\r\n  email: z.string().email(),\r\n})\r\n\r\nexport async function POST(request: Request) {\r\n  const resend = new Resend(process.env.RESEND_API_KEY)\r\n  \r\n  try {\r\n    const body = await request.json()\r\n    const { email } = newsletterSchema.parse(body)\r\n\r\n    // Check if email already exists\r\n    const existing = await prisma.newsletterSubscriber.findUnique({\r\n      where: { email },\r\n    })\r\n\r\n    if (existing) {\r\n      return NextResponse.json(\r\n        { error: 'Email already subscribed' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    // Add to database\r\n    await prisma.newsletterSubscriber.create({\r\n      data: { email },\r\n    })\r\n\r\n    // Send welcome email\r\n    await resend.emails.send({\r\n      from: 'Rise for Impact <noreply@riseforimpact.org>',\r\n      to: email,\r\n      subject: 'Welcome to Rise for Impact Newsletter!',\r\n      html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <div style=\"text-align: center; padding: 40px 0;\">\r\n            <h1 style=\"color: #22C55E; font-size: 32px; margin: 0;\">Rise for Impact</h1>\r\n          </div>\r\n\r\n          <div style=\"background: linear-gradient(to right, #22C55E, #F59E0B); height: 4px; margin: 20px 0;\"></div>\r\n\r\n          <h2 style=\"color: #1F2937;\">Welcome to the Movement! üéâ</h2>\r\n          \r\n          <p>Thank you for subscribing to our newsletter! You've joined 5,000+ changemakers receiving monthly updates on:</p>\r\n\r\n          <ul style=\"color: #4B5563; line-height: 1.8;\">\r\n            <li>üåü Inspiring impact stories from across Africa</li>\r\n            <li>üìö New program launches and opportunities</li>\r\n            <li>üéØ Leadership development resources</li>\r\n            <li>üåç Climate action initiatives</li>\r\n            <li>ü§ù Community events and collaboration opportunities</li>\r\n          </ul>\r\n\r\n          <div style=\"background: #F9FAFB; padding: 20px; border-radius: 8px; margin: 30px 0;\">\r\n            <h3 style=\"color: #1F2937; margin-top: 0;\">What's Next?</h3>\r\n            <p style=\"color: #4B5563; margin-bottom: 0;\">\r\n              Explore our programs, read our latest blog posts, and consider applying \r\n              to join our fellowship program. Together, we're building a better Africa!\r\n            </p>\r\n          </div>\r\n\r\n          <p style=\"color: #6B7280; font-size: 14px; border-top: 1px solid #E5E7EB; padding-top: 20px; margin-top: 40px;\">\r\n            You can unsubscribe at any time by clicking the link in our emails.<br>\r\n            Rise for Impact | Empowering African Youth Leaders\r\n          </p>\r\n        </div>\r\n      `,\r\n    })\r\n\r\n    return NextResponse.json(\r\n      { message: 'Subscribed successfully' },\r\n      { status: 201 }\r\n    )\r\n  } catch (error) {\r\n    if (error instanceof z.ZodError) {\r\n      return NextResponse.json(\r\n        { error: 'Invalid email address' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    console.error('Newsletter subscription error:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to subscribe' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n// GET - Fetch all subscribers (admin only)\r\nexport async function GET() {\r\n  try {\r\n    const subscribers = await prisma.newsletterSubscriber.findMany({\r\n      orderBy: { subscribedAt: 'desc' },\r\n    })\r\n\r\n    return NextResponse.json(subscribers, { status: 200 })\r\n  } catch (error) {\r\n    console.error('Error fetching subscribers:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch subscribers' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n// PATCH - Update subscriber status\r\nexport async function PATCH(request: Request) {\r\n  try {\r\n    const { searchParams } = new URL(request.url)\r\n    const id = searchParams.get('id')\r\n    const body = await request.json()\r\n    const { isActive } = body\r\n\r\n    if (!id) {\r\n      return NextResponse.json(\r\n        { error: 'Subscriber ID is required' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    const updated = await prisma.newsletterSubscriber.update({\r\n      where: { id: parseInt(id) },\r\n      data: { isActive },\r\n    })\r\n\r\n    return NextResponse.json(updated, { status: 200 })\r\n  } catch (error) {\r\n    console.error('Error updating subscriber:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to update subscriber' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n// DELETE - Remove subscriber\r\nexport async function DELETE(request: Request) {\r\n  try {\r\n    const { searchParams } = new URL(request.url)\r\n    const id = searchParams.get('id')\r\n\r\n    if (!id) {\r\n      return NextResponse.json(\r\n        { error: 'Subscriber ID is required' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    await prisma.newsletterSubscriber.delete({\r\n      where: { id: parseInt(id) },\r\n    })\r\n\r\n    return NextResponse.json(\r\n      { message: 'Subscriber deleted successfully' },\r\n      { status: 200 }\r\n    )\r\n  } catch (error) {\r\n    console.error('Error deleting subscriber:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to delete subscriber' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}