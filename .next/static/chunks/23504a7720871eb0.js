(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23322,e=>{"use strict";var t=e.i(43476),s=e.i(17255),r=e.i(18566),a=e.i(71645),l=e.i(52983);function i(){let{data:e,status:i}=(0,s.useSession)(),n=(0,r.useRouter)(),[d,o]=(0,a.useState)([]),[c,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)(""),[u,b]=(0,a.useState)("all"),[g,p]=(0,a.useState)(!1),[v,j]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[N,w]=(0,a.useState)([]),[k,L]=(0,a.useState)("active"),[C,S]=(0,a.useState)([]),[A,M]=(0,a.useState)(!1),[B,W]=(0,a.useState)(0);(0,a.useEffect)(()=>{"unauthenticated"===i&&n.push("/admin/login")},[i,n]),(0,a.useEffect)(()=>{"authenticated"===i&&z()},[i]);let z=async()=>{try{let e=await fetch("/api/newsletter"),t=await e.json();o(t)}catch(e){}finally{x(!1)}},H=async(e,t)=>{try{(await fetch(`/api/newsletter?id=${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!t})})).ok?z():alert("Failed to update subscriber status")}catch(e){alert("Error updating subscriber status")}},T=async e=>{if(confirm("Are you sure you want to delete this subscriber?"))try{(await fetch(`/api/newsletter?id=${e}`,{method:"DELETE"})).ok?(z(),alert("Subscriber deleted successfully!")):alert("Failed to delete subscriber")}catch(e){alert("Error deleting subscriber")}},E=async e=>{let t=Array.from(e.target.files||[]);if(0===t.length)return;let s=t.map(e=>({file:e,preview:URL.createObjectURL(e),id:Math.random().toString(36).substring(7)}));w(e=>[...e,...s])},R=async()=>{if(!v.trim()||!f.trim())return void alert("Please provide both subject and content");let e=[];if("all"===k?e=d:"active"===k?e=d.filter(e=>e.isActive):"inactive"===k?e=d.filter(e=>!e.isActive):"custom"===k&&(e=d.filter(e=>C.includes(e.email))),0===e.length)return void alert("No recipients selected. Please select at least one recipient.");if(confirm(`Send newsletter to ${e.length} subscriber(s)?`)){M(!0),W(0);try{let t=N.map(async e=>new Promise(t=>{let s=new FileReader;s.onloadend=()=>{t({id:e.id,data:s.result})},s.readAsDataURL(e.file)})),s=await Promise.all(t),r=f;N.forEach((e,t)=>{r=r.replace(e.preview,s[t].data)});let a=await fetch("/api/newsletter/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:v,content:r,recipients:e.map(e=>e.email)})});if(a.ok){let e=await a.json();alert(`Newsletter sent successfully to ${e.sent} subscribers!`),p(!1),j(""),y(""),w([])}else{let e=await a.json();alert(`Failed to send newsletter: ${e.error}`)}}catch(e){alert("Error sending newsletter")}finally{M(!1),W(0)}}},U=d.filter(e=>{let t=e.email.toLowerCase().includes(m.toLowerCase()),s="all"===u||"active"===u&&e.isActive||"inactive"===u&&!e.isActive;return t&&s}),P={total:d.length,active:d.filter(e=>e.isActive).length,inactive:d.filter(e=>!e.isActive).length};return"loading"===i||c?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-emerald-600 text-xl",children:"Loading..."})}):"unauthenticated"===i?null:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(l.default,{}),(0,t.jsx)("div",{className:"p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Newsletter Subscribers"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage email subscriptions and send newsletters"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>p(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Compose Newsletter"]}),(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([["Email,Subscribed At,Status",...U.map(e=>[e.email,new Date(e.subscribedAt).toLocaleString(),e.isActive?"Active":"Inactive"]).map(e=>e.map(e=>`"${e}"`).join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`newsletter-subscribers-${new Date().toISOString().split("T")[0]}.csv`,s.click(),window.URL.revokeObjectURL(t)},className:"px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-semibold transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Total Subscribers"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:P.total})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Active"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:P.active})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Inactive"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:P.inactive})]})]})})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Search by email...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-gray-900 bg-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,t.jsxs)("select",{value:u,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-gray-900 bg-white",children:[(0,t.jsx)("option",{value:"all",children:"All Statuses"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Email"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Subscribed At"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===U.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:4,className:"px-6 py-12 text-center",children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-gray-500",children:"No subscribers found"})]})}):U.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.email})]})}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600",children:[new Date(e.subscribedAt).toLocaleDateString()," at"," ",new Date(e.subscribedAt).toLocaleTimeString()]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("button",{onClick:()=>H(e.id,e.isActive),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${e.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:e.isActive?"Active":"Inactive"})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsx)("button",{onClick:()=>T(e.id),className:"text-red-600 hover:text-red-700 font-medium text-sm transition-colors",children:"Delete"})})]},e.id))})]})})}),(0,t.jsxs)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Showing ",U.length," of ",d.length," subscribers"]})]})}),g&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Compose Newsletter"}),(0,t.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Send to ",P.active," active subscribers"]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-6 border-2 border-emerald-200",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-4",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Select Recipients *"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,t.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-white border-2 border-emerald-200 rounded-lg cursor-pointer hover:border-emerald-400 transition-all duration-200 has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-50",children:[(0,t.jsx)("input",{type:"radio",name:"recipientFilter",value:"active",checked:"active"===k,onChange:e=>L(e.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:"Active Subscribers"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[P.active," subscribers"]})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-white border-2 border-emerald-200 rounded-lg cursor-pointer hover:border-emerald-400 transition-all duration-200 has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-50",children:[(0,t.jsx)("input",{type:"radio",name:"recipientFilter",value:"all",checked:"all"===k,onChange:e=>L(e.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:"All Subscribers"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[P.total," subscribers"]})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-white border-2 border-emerald-200 rounded-lg cursor-pointer hover:border-emerald-400 transition-all duration-200 has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-50",children:[(0,t.jsx)("input",{type:"radio",name:"recipientFilter",value:"inactive",checked:"inactive"===k,onChange:e=>L(e.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:"Inactive Subscribers"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[P.inactive," subscribers"]})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-4 bg-white border-2 border-emerald-200 rounded-lg cursor-pointer hover:border-emerald-400 transition-all duration-200 has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-50",children:[(0,t.jsx)("input",{type:"radio",name:"recipientFilter",value:"custom",checked:"custom"===k,onChange:e=>L(e.target.value),className:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:"Custom Selection"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Choose specific emails"})]})]})]}),"custom"===k&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-white border-2 border-emerald-300 rounded-lg max-h-64 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-gray-700",children:["Select Subscribers (",C.length," selected)"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>S(d.map(e=>e.email)),className:"text-xs px-3 py-1 bg-emerald-100 text-emerald-700 rounded-md hover:bg-emerald-200 font-semibold",children:"Select All"}),(0,t.jsx)("button",{onClick:()=>S([]),className:"text-xs px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 font-semibold",children:"Clear"})]})]}),(0,t.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2 hover:bg-emerald-50 rounded-lg cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:C.includes(e.email),onChange:t=>{t.target.checked?S(t=>[...t,e.email]):S(t=>t.filter(t=>t!==e.email))},className:"w-4 h-4 text-emerald-600 rounded focus:ring-emerald-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-700 flex-1",children:e.email}),(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${e.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:e.isActive?"Active":"Inactive"})]},e.id))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-emerald-100 border border-emerald-300 rounded-lg",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("p",{className:"text-sm font-semibold text-emerald-800",children:["Newsletter will be sent to ","all"===k?P.total:"active"===k?P.active:"inactive"===k?P.inactive:C.length," recipient(s)"]})]})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),"Subject Line *"]}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"Enter your newsletter subject...",className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 text-gray-900 bg-white transition-all duration-200 text-lg font-medium placeholder:text-gray-400"})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-dashed border-blue-200",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Media & Attachments"]}),(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:E,className:"hidden",id:"image-upload"}),(0,t.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center justify-center py-8 px-4 border-2 border-blue-300 border-dashed rounded-lg hover:bg-blue-50 transition-all duration-200 bg-white",children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-blue-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsx)("p",{className:"text-blue-600 font-semibold mb-1",children:"Click to upload images or flyers"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]}),N.length>0&&(0,t.jsx)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:N.map(e=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:e.preview,alt:"Uploaded",className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 shadow-sm"}),(0,t.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-200 rounded-lg flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{var t;let s;return t=e.preview,s=`<img src="${t}" alt="Newsletter image" style="max-width: 100%; height: auto; border-radius: 8px; margin: 20px 0;" />`,void y(e=>e+"\n"+s)},className:"opacity-0 group-hover:opacity-100 px-3 py-2 bg-blue-600 text-white text-xs font-semibold rounded-lg hover:bg-blue-700 transition-all duration-200 shadow-lg",children:"Insert"}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void w(e=>{let s=e.find(e=>e.id===t);return s&&URL.revokeObjectURL(s.preview),e.filter(e=>e.id!==t)})},className:"opacity-0 group-hover:opacity-100 px-3 py-2 bg-red-600 text-white text-xs font-semibold rounded-lg hover:bg-red-700 transition-all duration-200 shadow-lg",children:"Remove"})]})]},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-3",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Newsletter Content *"]}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("textarea",{value:f,onChange:e=>y(e.target.value),placeholder:"Write your newsletter content here... Use HTML tags for rich formatting!  Examples: <h1>Heading</h1> <p>Paragraph text</p> <strong>Bold text</strong> <a href='url'>Link</a>",rows:15,className:"w-full px-5 py-4 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 text-gray-900 bg-white font-mono text-sm transition-all duration-200 placeholder:text-gray-400"})}),(0,t.jsxs)("div",{className:"flex items-start gap-2 mt-3 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"Pro Tips:"}),(0,t.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,t.jsx)("li",{children:'Use HTML tags: <h1>, <p>, <strong>, <a href="...">'}),(0,t.jsx)("li",{children:'Upload images above, then click "Insert" to add them to your content'}),(0,t.jsx)("li",{children:"Images will be automatically embedded in the email"})]})]})]})]}),(f||N.length>0)&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 border-2 border-gray-200",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-4",children:[(0,t.jsxs)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Live Preview"]}),(0,t.jsx)("div",{className:"bg-white rounded-lg p-8 shadow-inner max-h-96 overflow-y-auto border border-gray-300",children:(0,t.jsx)("div",{className:"prose prose-sm max-w-none prose-headings:text-gray-900 prose-p:text-gray-700 prose-a:text-blue-600 prose-strong:text-gray-900 prose-img:rounded-lg prose-img:shadow-md",dangerouslySetInnerHTML:{__html:f}})})]}),A&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,t.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Sending newsletter..."})]})})]}),(0,t.jsxs)("div",{className:"p-6 border-t border-gray-200 flex gap-3 justify-end",children:[(0,t.jsx)("button",{onClick:()=>p(!1),disabled:A,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,t.jsxs)("button",{onClick:R,disabled:A||!v.trim()||!f.trim(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),A?"Sending...":`Send to ${P.active} Subscribers`]})]})]})})]})}e.s(["default",()=>i])}]);